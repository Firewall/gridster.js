/*
 gridster.js - v0.7.0 - 2017-03-27
 https://dsmorse.github.io/gridster.js/
 Copyright (c) 2017 ducksboard; Licensed MIT */
(function(e,b){"object"===typeof exports?module.exports=b(require("jquery")):"function"===typeof define&&define.amd?define("gridster-coords",["jquery"],b):e.GridsterCoords=b(e.$||e.jQuery)})(this,function(e){function b(b){b[0]&&e.isPlainObject(b[0])?this.data=b[0]:this.el=b;this.isCoords=!0;this.coords={};this.init();return this}var r=b.prototype;r.init=function(){this.set();this.original_coords=this.get()};r.set=function(e,b){var n=this.el;n&&!e&&(this.data=n.offset(),this.data.width=n.width(),this.data.height=
n.height());if(n&&e&&!b){var h=n.offset();this.data.top=h.top;this.data.left=h.left}h=this.data;void 0===h.left&&(h.left=h.x1);void 0===h.top&&(h.top=h.y1);this.coords.x1=h.left;this.coords.y1=h.top;this.coords.x2=h.left+h.width;this.coords.y2=h.top+h.height;this.coords.cx=h.left+h.width/2;this.coords.cy=h.top+h.height/2;this.coords.width=h.width;this.coords.height=h.height;this.coords.el=n||!1;return this};r.update=function(b){if(!b&&!this.el)return this;if(b)return this.data=e.extend({},this.data,
b),this.set(!0,!0);this.set(!0);return this};r.get=function(){return this.coords};r.destroy=function(){this.el.removeData("coords");delete this.el};e.fn.coords=function(){if(this.data("coords"))return this.data("coords");var e=new b(this);this.data("coords",e);return e};return b});
(function(e,b){"object"===typeof exports?module.exports=b(require("jquery")):"function"===typeof define&&define.amd?define("gridster-collision",["jquery","gridster-coords"],b):e.GridsterCollision=b(e.$||e.jQuery,e.GridsterCoords)})(this,function(e,b){function r(b,h,a){this.options=e.extend(g,a);this.$element=b;this.last_colliders=[];this.last_colliders_coords=[];this.set_colliders(h);this.init()}var g={colliders_context:document.body,overlapping_region:"C"};r.defaults=g;var m=r.prototype;m.init=function(){this.find_collisions()};
m.overlaps=function(e,b){var a=!1,c=!1;if(b.x1>=e.x1&&b.x1<=e.x2||b.x2>=e.x1&&b.x2<=e.x2||e.x1>=b.x1&&e.x2<=b.x2)a=!0;if(b.y1>=e.y1&&b.y1<=e.y2||b.y2>=e.y1&&b.y2<=e.y2||e.y1>=b.y1&&e.y2<=b.y2)c=!0;return a&&c};m.detect_overlapping_region=function(e,b){var a="",c="";e.y1>b.cy&&e.y1<b.y2&&(a="N");e.y2>b.y1&&e.y2<b.cy&&(a="S");e.x1>b.cx&&e.x1<b.x2&&(c="W");e.x2>b.x1&&e.x2<b.cx&&(c="E");return a+c||"C"};m.calculate_overlapped_area_coords=function(b,h){var a=Math.max(b.x1,h.x1),c=Math.max(b.y1,h.y1);return e({left:a,
top:c,width:Math.min(b.x2,h.x2)-a,height:Math.min(b.y2,h.y2)-c}).coords().get()};m.calculate_overlapped_area=function(e){return e.width*e.height};m.manage_colliders_start_stop=function(b,h,a){for(var c=this.last_colliders_coords,d=0,f=c.length;d<f;d++)-1===e.inArray(c[d],b)&&h.call(this,c[d]);h=0;for(d=b.length;h<d;h++)-1===e.inArray(b[h],c)&&a.call(this,b[h])};m.find_collisions=function(b){var h=this.options.overlapping_region,a=[],c=[],d=this.colliders||this.$colliders,f=d.length;for(b=this.$element.coords().update(b||
!1).get();f--;){var l=this.$colliders?e(d[f]):d[f],p=l.isCoords?l:l.coords(),k=p.get();if(this.overlaps(b,k)){var q=this.detect_overlapping_region(b,k);if(q===h||"all"===h){var t=this.calculate_overlapped_area_coords(b,k),v=this.calculate_overlapped_area(t);0!==v&&(l={area:v,area_coords:t,region:q,coords:k,player_coords:b,el:l},this.options.on_overlap&&this.options.on_overlap.call(this,l),a.push(p),c.push(l))}}}(this.options.on_overlap_stop||this.options.on_overlap_start)&&this.manage_colliders_start_stop(a,
this.options.on_overlap_start,this.options.on_overlap_stop);this.last_colliders_coords=a;return c};m.get_closest_colliders=function(e){e=this.find_collisions(e);e.sort(function(e,a){return"C"===e.region&&"C"===a.region?e.coords.y1<a.coords.y1||e.coords.x1<a.coords.x1?-1:1:1});return e};m.set_colliders=function(b){"string"===typeof b||b instanceof e?this.$colliders=e(b,this.options.colliders_context).not(this.$element):this.colliders=e(b)};e.fn.collision=function(e,b){return new r(this,e,b)};return r});
(function(e,b){e.delay=function(e,b){var m=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,m)},b)};e.debounce=function(e,b,m){var g;return function(){var h=this,a=arguments;m&&!g&&e.apply(h,a);clearTimeout(g);g=setTimeout(function(){g=null;m||e.apply(h,a)},b)}};e.throttle=function(e,b){var m,g,h,a,c,d,f=debounce(function(){c=a=!1},b);return function(){m=this;g=arguments;h||(h=setTimeout(function(){h=null;c&&e.apply(m,g);f()},b));a?c=!0:d=e.apply(m,g);f();a=
!0;return d}}})(window);
(function(e,b){"object"===typeof exports?module.exports=b(require("jquery")):"function"===typeof define&&define.amd?define("gridster-draggable",["jquery"],b):e.GridsterDraggable=b(e.$||e.jQuery)})(this,function(e){function b(a,d){this.options=e.extend({},r,d);this.$document=e(document);this.$container=e(a);this.$scroll_container=this.options.scroll_container===window?e(window):this.$container.closest(this.options.scroll_container);this.is_dragging=!1;this.player_min_left=0+this.options.offset_left;
this.player_min_top=0+this.options.offset_top;this.id=++h+"";this.ns=".gridster-draggable-"+this.id;this.init()}var r={items:"li",distance:1,limit:{width:!0,height:!1},offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:!0,helper:!1,remove_helper:!0},g=e(window),m={x:"left",y:"top"},n=!!("ontouchstart"in window),h=0;b.defaults=r;var a=b.prototype;a.init=function(){var a=this.$container.css("position");this.calculate_dimensions();
this.$container.css("position","static"===a?"relative":a);this.disabled=!1;this.events();g.bind(this.nsEvent("resize"),throttle(e.proxy(this.calculate_dimensions,this),200))};a.nsEvent=function(a){return(a||"")+this.ns};a.events=function(){this.pointer_events={start:this.nsEvent("touchstart")+" "+this.nsEvent("mousedown"),move:this.nsEvent("touchmove")+" "+this.nsEvent("mousemove"),end:this.nsEvent("touchend")+" "+this.nsEvent("mouseup")};this.$container.on(this.nsEvent("selectstart"),e.proxy(this.on_select_start,
this));this.$container.on(this.pointer_events.start,this.options.items,e.proxy(this.drag_handler,this));this.$document.on(this.pointer_events.end,e.proxy(function(a){this.is_dragging=!1;if(!this.disabled&&(this.$document.off(this.pointer_events.move),this.drag_start))this.on_dragstop(a)},this))};a.get_actual_pos=function(a){return a.position()};a.get_mouse_pos=function(a){a.originalEvent&&a.originalEvent.touches&&(a=a.originalEvent,a=a.touches.length?a.touches[0]:a.changedTouches[0]);return{left:a.clientX,
top:a.clientY}};a.get_offset=function(a){a.preventDefault();a=this.get_mouse_pos(a);var c=Math.round(a.left-this.mouse_init_pos.left),f=Math.round(a.top-this.mouse_init_pos.top),e=Math.round(this.el_init_offset.left+c-this.baseX+this.$scroll_container.scrollLeft()-this.scroll_container_offset_x),b=Math.round(this.el_init_offset.top+f-this.baseY+this.$scroll_container.scrollTop()-this.scroll_container_offset_y);this.options.limit.width&&(e>this.player_max_left?e=this.player_max_left:e<this.player_min_left&&
(e=this.player_min_left));this.options.limit.height&&(b>this.player_max_top?b=this.player_max_top:b<this.player_min_top&&(b=this.player_min_top));return{position:{left:e,top:b},pointer:{left:a.left,top:a.top,diff_left:c+(this.$scroll_container.scrollLeft()-this.scroll_container_offset_x),diff_top:f+(this.$scroll_container.scrollTop()-this.scroll_container_offset_y)}}};a.get_drag_data=function(a){a=this.get_offset(a);a.$player=this.$player;a.$helper=this.helper?this.$helper:this.$player;return a};
a.set_limits=function(a){a||(a=this.$container.width());this.player_max_left=a-this.player_width+-this.options.offset_left;this.player_max_top=this.options.container_height-this.player_height+-this.options.offset_top;this.options.container_width=a;return this};a.scroll_in=function(a,d){var c=m[a],e="scroll"+(c.charAt(0).toUpperCase()+c.slice(1)),b="x"===a,k=b?this.scroller_width:this.scroller_height;var q=this.$scroll_container===window?b?this.$scroll_container.width():this.$scroll_container.height():
b?this.$scroll_container[0].scrollWidth:this.$scroll_container[0].scrollHeight;var t=b?this.$player.width():this.$player.height();b=this.$scroll_container[e]();var v=b+50;c=b+d.pointer[c];q=q-k+t;c>=b+k-50&&(k=b+30,k<q&&(this.$scroll_container[e](k),this["scroll_offset_"+a]+=30));c<=v&&(k=b-30,0<k&&(this.$scroll_container[e](k),this["scroll_offset_"+a]-=30));return this};a.manage_scroll=function(a){this.scroll_in("x",a);this.scroll_in("y",a)};a.calculate_dimensions=function(){this.scroller_height=
this.$scroll_container.height();this.scroller_width=this.$scroll_container.width()};a.drag_handler=function(a){if(!this.disabled&&(1===a.which||n)&&!this.ignore_drag(a)){var c=this,f=!0;this.$player=e(a.currentTarget);this.el_init_pos=this.get_actual_pos(this.$player);this.mouse_init_pos=this.get_mouse_pos(a);this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top;this.$document.on(this.pointer_events.move,function(a){var d=c.get_mouse_pos(a),e=Math.abs(d.top-c.mouse_init_pos.top);if(!(Math.abs(d.left-
c.mouse_init_pos.left)>c.options.distance||e>c.options.distance))return!1;if(f)return f=!1,c.on_dragstart.call(c,a),!1;!0===c.is_dragging&&c.on_dragmove.call(c,a);return!1});if(!n)return!1}};a.on_dragstart=function(a){a.preventDefault();if(this.is_dragging)return this;this.drag_start=this.is_dragging=!0;var c=this.$container.offset();this.baseX=Math.round(c.left);this.baseY=Math.round(c.top);"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),
this.helper=!0):this.helper=!1;this.scroll_container_offset_y=this.$scroll_container.scrollTop();this.scroll_container_offset_x=this.$scroll_container.scrollLeft();this.el_init_offset=this.$player.offset();this.player_width=this.$player.width();this.player_height=this.$player.height();this.set_limits(this.options.container_width);this.options.start&&this.options.start.call(this.$player,a,this.get_drag_data(a));return!1};a.on_dragmove=function(a){var c=this.get_drag_data(a);this.options.autoscroll&&
this.manage_scroll(c);this.options.move_element&&(this.helper?this.$helper:this.$player).css({position:"absolute",left:c.position.left,top:c.position.top});c.prev_position=this.last_position||c.position;this.options.drag&&this.options.drag.call(this.$player,a,c);this.last_position=c.position;return!1};a.on_dragstop=function(a){var c=this.get_drag_data(a);this.drag_start=!1;this.options.stop&&this.options.stop.call(this.$player,a,c);this.helper&&this.options.remove_helper&&this.$helper.remove();return!1};
a.on_select_start=function(a){if(!this.disabled&&!this.ignore_drag(a))return!1};a.enable=function(){this.disabled=!1};a.disable=function(){this.disabled=!0};a.destroy=function(){this.disable();this.$container.off(this.ns);this.$document.off(this.ns);g.off(this.ns);e.removeData(this.$container,"drag")};a.ignore_drag=function(a){return this.options.handle?!e(a.target).is(this.options.handle):e.isFunction(this.options.ignore_dragging)?this.options.ignore_dragging(a):this.options.resize?!e(a.target).is(this.options.items):
e(a.target).is(this.options.ignore_dragging.join(", "))};e.fn.gridDraggable=function(a){return new b(this,a)};e.fn.dragg=function(a){return this.each(function(){e.data(this,"drag")||e.data(this,"drag",new b(this,a))})};return b});
(function(e,b){"object"===typeof exports?module.exports=b(require("jquery"),require("./jquery.draggable.js"),require("./jquery.collision.js"),require("./jquery.coords.js"),require("./utils.js")):"function"===typeof define&&define.amd?define(["jquery","gridster-draggable","gridster-collision"],b):e.Gridster=b(e.$||e.jQuery,e.GridsterDraggable,e.GridsterCollision)})(this,function(e,b,r){function g(a,c){this.options=e.extend(!0,{},h,c);this.options.draggable=this.options.draggable||{};this.options.draggable=
e.extend(!0,{},this.options.draggable,{scroll_container:this.options.scroll_container});this.$el=e(a);this.$scroll_container=this.options.scroll_container===window?e(window):this.$el.closest(this.options.scroll_container);this.$wrapper=this.$el.parent();this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w");this.$changed=e([]);this.w_queue={};this.is_responsive()?this.min_widget_width=this.get_responsive_col_width():this.min_widget_width=this.options.widget_base_dimensions[0];
this.min_widget_height=this.options.widget_base_dimensions[1];this.is_resizing=!1;this.prev_col_count=this.min_col_count=this.options.min_cols;this.generated_stylesheets=[];this.$style_tags=e([]);"boolean"===typeof this.options.limit&&(console.log("limit: bool is deprecated, consider using limit: { width: boolean, height: boolean} instead"),this.options.limit={width:this.options.limit,height:this.options.limit});this.options.auto_init&&this.init()}function m(a){for(var c=["col","row","size_x","size_y"],
d={},f=0,e=c.length;f<e;f++){var b=c[f];if(!(b in a))throw Error("Not exists property `"+b+"`");var k=a[b];if(!k||isNaN(k))throw Error("Invalid value of `"+b+"` property");d[b]=+k}return d}var n=e(window),h={namespace:"",widget_selector:"li",static_class:"static",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:Infinity,limit:{width:!0,height:!1},min_rows:1,max_rows:15,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,auto_init:!0,center_widgets:!1,
responsive_breakpoint:!1,scroll_container:window,shift_larger_widgets_down:!0,move_widgets_down_only:!1,shift_widgets_up:!0,show_element:function(a,c){c?a.fadeIn(c):a.fadeIn()},hide_element:function(a,c){c?a.fadeOut(c):a.fadeOut()},serialize_params:function(a,c){return{col:c.col,row:c.row,size_x:c.size_x,size_y:c.size_y}},collision:{wait_for_mouseup:!1},draggable:{items:".gs-w:not(.static)",distance:4,ignore_dragging:b.defaults.ignore_dragging.slice(0)},resize:{enabled:!1,axes:["both"],handle_append_to:"",
handle_class:"gs-resize-handle",max_size:[Infinity,Infinity],min_size:[1,1]},ignore_self_occupied:!1};g.defaults=h;g.generated_stylesheets=[];g.sort_by_row_asc=function(a){return a=a.sort(function(a,d){a.row||(a=e(a).coords().grid,d=e(d).coords().grid);a=m(a);d=m(d);return a.row>d.row?1:-1})};g.sort_by_row_and_col_asc=function(a){return a=a.sort(function(a,d){a=m(a);d=m(d);return a.row>d.row||a.row===d.row&&a.col>d.col?1:-1})};g.sort_by_col_asc=function(a){return a=a.sort(function(a,d){a=m(a);d=m(d);
return a.col>d.col?1:-1})};g.sort_by_row_desc=function(a){return a=a.sort(function(a,d){a=m(a);d=m(d);return a.row+a.size_y<d.row+d.size_y?1:-1})};b=g.prototype;b.init=function(){this.options.resize.enabled&&this.setup_resize();this.generate_grid_and_stylesheet();this.get_widgets_from_DOM();this.set_dom_grid_height();this.set_dom_grid_width();this.$wrapper.addClass("ready");this.draggable();this.options.resize.enabled&&this.resizable();this.options.center_widgets&&setTimeout(e.proxy(function(){this.center_widgets()},
this),0);n.bind("resize.gridster",debounce(e.proxy(this.recalculate_faux_grid,this),300))};b.disable=function(){this.$wrapper.find(".player-revert").removeClass("player-revert");this.drag_api.disable();return this};b.enable=function(){this.drag_api.enable();return this};b.disable_resize=function(){this.$el.addClass("gs-resize-disabled");this.resize_api.disable();return this};b.enable_resize=function(){this.$el.removeClass("gs-resize-disabled");this.resize_api.enable();return this};b.add_widget=function(a,
c,d,f,b,p,k,q,t){c||(c=1);d||(d=1);"boolean"!==typeof t&&(t=!0);if(f||b){var l={col:f,row:b,size_x:c,size_y:d};this.options.avoid_overlapped_widgets&&this.empty_cells(f,b,c,d)}else if(l=this.next_position(c,d),!1===l)return!1;a=e(a).attr({"data-resizable":t,"data-col":l.col,"data-row":l.row,"data-sizex":c,"data-sizey":d}).addClass("gs-w").appendTo(this.$el).hide();this.$widgets=this.$widgets.add(a);this.$changed=this.$changed.add(a);this.register_widget(a);l=parseInt(l.row)+(parseInt(l.size_y)-1);
this.rows<l&&this.add_faux_rows(l-this.rows);p&&this.set_widget_max_size(a,p);k&&this.set_widget_min_size(a,k);this.set_dom_grid_width();this.set_dom_grid_height();this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0]);this.options.center_widgets&&setTimeout(e.proxy(function(){this.center_widgets()},this),0);this.options.show_element.call(this,a,q);return a};b.set_widget_min_size=function(a,c){a="number"===typeof a?this.$widgets.eq(a):a;if(!a.length)return this;
var d=a.data("coords").grid;d.min_size_x=c[0];d.min_size_y=c[1];return this};b.set_widget_max_size=function(a,c){a="number"===typeof a?this.$widgets.eq(a):a;if(!a.length)return this;var d=a.data("coords").grid;d.max_size_x=c[0];d.max_size_y=c[1];return this};b.add_resize_handle=function(a){a=this.options.resize.handle_append_to?e(this.options.resize.handle_append_to,a):a;0===a.children("span[class~='"+this.resize_handle_class+"']").length&&e(this.resize_handle_tpl).appendTo(a);return this};b.resize_widget=
function(a,c,d,f){var e=a.coords().grid;this.is_resizing=!0;c||(c=e.size_x);d||(d=e.size_y);this.is_valid_row(e.row,d)||this.add_faux_rows(Math.max(this.calculate_highest_row(e.row,d)-this.rows,0));this.is_valid_col(e.col,d)||this.add_faux_cols(Math.max(this.calculate_highest_row(e.col,c)-this.cols,0));c={col:e.col,row:e.row,size_x:c,size_y:d};this.mutate_widget_in_gridmap(a,e,c);this.set_dom_grid_height();this.set_dom_grid_width();f&&f.call(this,c.size_x,c.size_y);this.is_resizing=!1;return a};b.expand_widget=
function(a,c,d,f,b){var l=a.coords().grid,k=Math.floor((e(window).width()-2*this.options.widget_margins[0])/this.min_widget_width);c=c||Math.min(k,this.cols);d||(d=l.size_y);k=l.size_y;a.attr("pre_expand_col",l.col);a.attr("pre_expand_sizex",l.size_x);a.attr("pre_expand_sizey",l.size_y);f=f||1;d>k&&this.add_faux_rows(Math.max(d-k,0));c={col:f,row:l.row,size_x:c,size_y:d};this.mutate_widget_in_gridmap(a,l,c);this.set_dom_grid_height();this.set_dom_grid_width();b&&b.call(this,c.size_x,c.size_y);return a};
b.collapse_widget=function(a,c){var d=a.coords().grid,f=parseInt(a.attr("pre_expand_sizex")),e=parseInt(a.attr("pre_expand_sizey"));f={col:parseInt(a.attr("pre_expand_col")),row:d.row,size_x:f,size_y:e};this.mutate_widget_in_gridmap(a,d,f);this.set_dom_grid_height();this.set_dom_grid_width();c&&c.call(this,f.size_x,f.size_y);return a};b.fit_to_content=function(a,c,d,f){var e=a.coords().grid,b=this.$wrapper.width(),k=this.$wrapper.height();c={col:e.col,row:e.row,size_x:Math.min(c,Math.ceil((b+2*this.options.widget_margins[0])/
(this.options.widget_base_dimensions[0]+2*this.options.widget_margins[0]))),size_y:Math.min(d,Math.ceil((k+2*this.options.widget_margins[1])/(this.options.widget_base_dimensions[1]+2*this.options.widget_margins[1])))};this.mutate_widget_in_gridmap(a,e,c);this.set_dom_grid_height();this.set_dom_grid_width();f&&f.call(this,c.size_x,c.size_y);return a};b.center_widgets=debounce(function(){var a=this.$wrapper.width();var c=this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0]+
2*this.options.widget_margins[0];a=2*Math.floor(Math.max(Math.floor(a/c),this.min_col_count)/2);this.options.min_cols=a;this.options.max_cols=a;this.options.extra_cols=0;this.set_dom_grid_width(a);this.cols=a;var d=(a-this.prev_col_count)/2;0>d?(this.get_min_col()>-1*d?this.shift_cols(d):this.resize_widget_dimensions(this.options),setTimeout(e.proxy(function(){this.resize_widget_dimensions(this.options)},this),0)):0<d?(this.resize_widget_dimensions(this.options),setTimeout(e.proxy(function(){this.shift_cols(d)},
this),0)):(this.resize_widget_dimensions(this.options),setTimeout(e.proxy(function(){this.resize_widget_dimensions(this.options)},this),0));this.prev_col_count=a;return this},200);b.get_min_col=function(){return Math.min.apply(Math,this.$widgets.map(e.proxy(function(a,c){return this.get_cells_occupied(e(c).coords().grid).cols},this)).get())};b.shift_cols=function(a){var c=this.$widgets.map(e.proxy(function(a,c){var d=e(c);return this.dom_to_coords(d)},this));c=g.sort_by_row_and_col_asc(c);c.each(e.proxy(function(c,
f){var d=e(f.el),b=d.coords().grid,k=parseInt(d.attr("data-col")),q={col:Math.max(Math.round(k+a),1),row:b.row,size_x:b.size_x,size_y:b.size_y};setTimeout(e.proxy(function(){this.mutate_widget_in_gridmap(d,b,q)},this),0)},this))};b.mutate_widget_in_gridmap=function(a,c,d){var f=c.size_y,b=this.get_cells_occupied(c),p=this.get_cells_occupied(d),k=[];e.each(b.cols,function(a,c){-1===e.inArray(c,p.cols)&&k.push(c)});var q=[];e.each(p.cols,function(a,c){-1===e.inArray(c,b.cols)&&q.push(c)});var t=[];
e.each(b.rows,function(a,c){-1===e.inArray(c,p.rows)&&t.push(c)});var h=[];e.each(p.rows,function(a,c){-1===e.inArray(c,b.rows)&&h.push(c)});this.remove_from_gridmap(c);q.length&&this.empty_cells.apply(this,[d.col,d.row,d.size_x,Math.min(f,d.size_y),a]);h.length&&this.empty_cells.apply(this,[d.col,d.row,d.size_x,d.size_y,a]);c.col=d.col;c.row=d.row;c.size_x=d.size_x;c.size_y=d.size_y;this.add_to_gridmap(d,a);a.removeClass("player-revert");this.update_widget_dimensions(a,d);this.options.shift_widgets_up&&
(k.length&&this.remove_empty_cells.apply(this,[k[0],d.row,k[k.length-1]-k[0]+1,Math.min(f,d.size_y),a]),t.length&&this.remove_empty_cells.apply(this,[d.col,d.row,d.size_x,d.size_y,a]));this.move_widget_up(a);return this};b.empty_cells=function(a,c,d,f,b){this.widgets_below({col:a,row:c-f,size_x:d,size_y:f}).not(b).each(e.proxy(function(a,d){var b=e(d),l=b.coords().grid;l.row<=c+f-1&&this.move_widget_down(b,c+f-l.row)},this));this.is_resizing||this.set_dom_grid_height();return this};b.remove_empty_cells=
function(a,c,d,f,b){this.widgets_below({col:a,row:c,size_x:d,size_y:f}).not(b).each(e.proxy(function(a,c){this.move_widget_up(e(c),f)},this));this.set_dom_grid_height();return this};b.next_position=function(a,c){a||(a=1);c||(c=1);for(var d=this.gridmap,f=d.length,e=[],b,k=1;k<f;k++){b=d[k].length;for(var q=1;q<=b;q++)this.can_move_to({size_x:a,size_y:c},k,q)&&e.push({col:k,row:q,size_y:c,size_x:a})}return e.length?g.sort_by_row_and_col_asc(e)[0]:!1};b.remove_by_grid=function(a,c){var d=this.is_widget(a,
c);d&&this.remove_widget(d)};b.remove_widget=function(a,c,d){var f=a instanceof e?a:e(a);if(0===f.length)return this;var b=f.coords().grid;if(void 0===b)return this;e.isFunction(c)&&(d=c,c=!1);this.cells_occupied_by_placeholder={};this.$widgets=this.$widgets.not(f);var p=this.widgets_below(f);this.remove_from_gridmap(b);this.options.hide_element.call(this,f,e.proxy(function(){f.remove();c||p.each(e.proxy(function(a,c){this.move_widget_up(e(c),b.size_y)},this));this.set_dom_grid_height();d&&d.call(this,
a)},this));return this};b.remove_all_widgets=function(a){this.$widgets.each(e.proxy(function(c,d){this.remove_widget(d,!0,a)},this));return this};b.serialize=function(a){a||(a=this.$widgets);var c=[];a.each(e.proxy(function(a,f){var d=e(f);"undefined"!==typeof d.coords().grid&&c.push(this.options.serialize_params(d,d.coords().grid))},this));return c};b.serialize_changed=function(){return this.serialize(this.$changed)};b.dom_to_coords=function(a){return{col:parseInt(a.attr("data-col"),10),row:parseInt(a.attr("data-row"),
10),size_x:parseInt(a.attr("data-sizex"),10)||1,size_y:parseInt(a.attr("data-sizey"),10)||1,max_size_x:parseInt(a.attr("data-max-sizex"),10)||!1,max_size_y:parseInt(a.attr("data-max-sizey"),10)||!1,min_size_x:parseInt(a.attr("data-min-sizex"),10)||!1,min_size_y:parseInt(a.attr("data-min-sizey"),10)||!1,el:a}};b.register_widget=function(a){var c=a instanceof e,d=c?this.dom_to_coords(a):a,f=!1;c||(a=d.el);c=a.attr("data-resizable");var b=this.can_go_widget_up(d);this.options.shift_widgets_up&&b&&(d.row=
b,a.attr("data-row",b),this.$el.trigger("gridster:positionchanged",[d]),f=!0);this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:d.size_x,size_y:d.size_y},d.col,d.row)&&(e.extend(d,this.next_position(d.size_x,d.size_y)),a.attr({"data-col":d.col,"data-row":d.row,"data-sizex":d.size_x,"data-sizey":d.size_y}),f=!0);a.data("coords",a.coords());a.data("coords").grid=d;this.add_to_gridmap(d,a);this.update_widget_dimensions(a,d);this.options.resize.enabled&&"true"===c&&this.add_resize_handle(a);
return f};b.update_widget_position=function(a,c){this.for_each_cell_occupied(a,function(a,f){if(!this.gridmap[a])return this;this.gridmap[a][f]=c});return this};b.update_widget_dimensions=function(a,c){var d=c.size_x*(this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0])+(c.size_x-1)*this.options.widget_margins[0],f=c.size_y*this.options.widget_base_dimensions[1]+(c.size_y-1)*this.options.widget_margins[1];a.data("coords").update({width:d,height:f});a.attr({"data-col":c.col,
"data-row":c.row,"data-sizex":c.size_x,"data-sizey":c.size_y});return this};b.update_widgets_dimensions=function(){e.each(this.$widgets,e.proxy(function(a,c){var d=e(c).coords().grid;"object"===typeof d&&this.update_widget_dimensions(e(c),d)},this));return this};b.remove_from_gridmap=function(a){return this.update_widget_position(a,!1)};b.add_to_gridmap=function(a,c){this.update_widget_position(a,c||a.el)};b.draggable=function(){var a=this,c=e.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],
offset_top:this.options.widget_margins[1],container_width:this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0],container_height:this.rows*this.min_widget_height+(this.rows+1)*this.options.widget_margins[0],limit:{width:this.options.limit.width,height:this.options.limit.height},start:function(c,f){a.$widgets.filter(".player-revert").removeClass("player-revert");a.$player=e(this);a.$helper=e(f.$helper);a.helper=!a.$helper.is(a.$player);a.on_start_drag.call(a,c,f);a.$el.trigger("gridster:dragstart")},
stop:function(c,f){a.on_stop_drag.call(a,c,f);a.$el.trigger("gridster:dragstop")},drag:throttle(function(c,f){a.on_drag.call(a,c,f);a.$el.trigger("gridster:drag")},60)});this.drag_api=this.$el.dragg(c).data("drag")};b.resizable=function(){this.resize_api=this.$el.gridDraggable({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:!1,resize:!0,limit:{width:Infinity!==this.options.max_cols||this.limit.width,height:Infinity!==
this.options.max_rows||this.limit.height},scroll_container:this.options.scroll_container,start:e.proxy(this.on_start_resize,this),stop:e.proxy(function(a,c){delay(e.proxy(function(){this.on_stop_resize(a,c)},this),120)},this),drag:throttle(e.proxy(this.on_resize,this),60)});return this};b.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var a='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';this.resize_handle_tpl=e.map(this.options.resize.axes,
function(c){return a.replace("{type}",c)}).join("");e.isArray(this.options.draggable.ignore_dragging)&&this.options.draggable.ignore_dragging.push("."+this.resize_handle_class);return this};b.on_start_drag=function(a,c){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging");this.highest_col=this.get_highest_occupied_cell().col;this.$player.addClass("player");this.player_grid_data=this.$player.coords().grid;this.placeholder_grid_data=e.extend({},this.player_grid_data);this.get_highest_occupied_cell().row+
this.player_grid_data.size_y<=this.options.max_rows&&this.set_dom_grid_height(this.$el.height()+this.player_grid_data.size_y*this.min_widget_height);this.set_dom_grid_width(this.cols);var d=this.player_grid_data.size_x,f=this.cols-this.highest_col;Infinity===this.options.max_cols&&f<=d&&this.add_faux_cols(Math.min(d-f,1));d=this.faux_grid;f=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);
this.last_cols=[];this.last_rows=[];this.collision_api=this.$helper.collision(d,this.options.collision);this.$preview_holder=e("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:f.width,height:f.height}}).appendTo(this.$el);this.options.draggable.start&&this.options.draggable.start.call(this,a,c)};b.on_drag=function(a,c){if(null===this.$player)return!1;var d=this.options.widget_margins,f=this.$preview_holder.attr("data-col"),
e=this.$preview_holder.attr("data-row");d={left:c.position.left+this.baseX-d[0]*f,top:c.position.top+this.baseY-d[1]*e};Infinity===this.options.max_cols&&(this.placeholder_grid_data.col+this.placeholder_grid_data.size_x-1>=this.cols-1&&this.options.max_cols>=this.cols+1&&(this.add_faux_cols(1),this.set_dom_grid_width(this.cols+1),this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])),this.collision_api.set_colliders(this.faux_grid));this.colliders_data=
this.collision_api.get_closest_colliders(d);this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column);this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row);this.helper&&this.$player&&this.$player.css({left:c.position.left,top:c.position.top});this.options.draggable.drag&&this.options.draggable.drag.call(this,a,c)};b.on_stop_drag=function(a,c){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging");var d=
this.options.widget_margins,f=this.$preview_holder.attr("data-col"),e=this.$preview_holder.attr("data-row");c.position.left=c.position.left+this.baseX-d[0]*f;c.position.top=c.position.top+this.baseY-d[1]*e;this.colliders_data=this.collision_api.get_closest_colliders(c.position);this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column);this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row);this.$changed=this.$changed.add(this.$player);
d=this.placeholder_grid_data.el.coords().grid;if(d.col!==this.placeholder_grid_data.col||d.row!==this.placeholder_grid_data.row)this.update_widget_position(d,!1),this.options.collision.wait_for_mouseup&&this.for_each_cell_occupied(this.placeholder_grid_data,function(a,c){if(this.is_widget(a,c)){var d=this.placeholder_grid_data.row+this.placeholder_grid_data.size_y,f=parseInt(this.gridmap[a][c][0].getAttribute("data-row"));d-=f;this.move_widget_down(this.is_widget(a,c),d)||this.set_placeholder(this.placeholder_grid_data.el.coords().grid.col,
this.placeholder_grid_data.el.coords().grid.row)}});this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data);d=this.placeholder_grid_data.col;f=this.placeholder_grid_data.row;this.set_cells_player_occupies(d,f);this.$player.coords().grid.row=f;this.$player.coords().grid.col=d;this.$player.addClass("player-revert").removeClass("player").attr({"data-col":d,"data-row":f}).css({left:"",top:""});this.options.draggable.stop&&this.options.draggable.stop.call(this,a,c);this.$preview_holder.remove();
this.$helper=this.$player=null;this.placeholder_grid_data={};this.player_grid_data={};this.cells_occupied_by_placeholder={};this.cells_occupied_by_player={};this.w_queue={};this.set_dom_grid_height();this.set_dom_grid_width();Infinity===this.options.max_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])};b.on_start_resize=function(a,c){this.$resized_widget=c.$player.closest(".gs-w");this.resize_coords=this.$resized_widget.coords();this.resize_wgd=
this.resize_coords.grid;this.resize_initial_width=this.resize_coords.coords.width;this.resize_initial_height=this.resize_coords.coords.height;this.resize_initial_sizex=this.resize_coords.grid.size_x;this.resize_initial_sizey=this.resize_coords.grid.size_y;this.resize_initial_col=this.resize_coords.grid.col;this.resize_last_sizex=this.resize_initial_sizex;this.resize_last_sizey=this.resize_initial_sizey;this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-
this.resize_initial_col+1);this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1];this.resize_min_size_x=this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1;this.resize_min_size_y=this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1;this.resize_initial_last_col=this.get_highest_occupied_cell().col;this.set_dom_grid_width(this.cols);this.resize_dir={right:c.$player.is("."+this.resize_handle_class+"-x"),bottom:c.$player.is("."+this.resize_handle_class+
"-y")};this.is_responsive()||this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],"min-height":this.options.widget_base_dimensions[1]});var d=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=e("<"+d+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el);this.$resized_widget.addClass("resizing");
this.options.resize.start&&this.options.resize.start.call(this,a,c,this.$resized_widget);this.$el.trigger("gridster:resizestart")};b.on_stop_resize=function(a,c){this.$resized_widget.removeClass("resizing").css({width:"",height:"","min-width":"","min-height":""});delay(e.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""});this.options.resize.stop&&this.options.resize.stop.call(this,a,c,this.$resized_widget);this.$el.trigger("gridster:resizestop")},this),300);
this.set_dom_grid_width();this.set_dom_grid_height();Infinity===this.options.max_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width)};b.on_resize=function(a,c){var d=c.$helper.attr("class"),f="";null!==d.match(/gs-resize-handle-\w+/i)&&(f=d.match(/gs-resize-handle-\w+/i)[0].replace("gs-resize-handle-",""));d=c.pointer.diff_left;var e=c.pointer.diff_top,b=this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0],k=this.options.widget_base_dimensions[1],
q=this.options.widget_margins[0],t=this.options.widget_margins[1],h=this.resize_max_size_x,w=this.resize_min_size_x,g=this.resize_max_size_y,m=this.resize_min_size_y,n=Infinity===this.options.max_cols;switch(f){case "se":f=Math.ceil(d/(b+2*q)-.2);var u=Math.ceil(e/(k+2*t)-.2);break;case "e":f=Math.ceil(d/(b+2*q)-.2);u=0;break;case "s":f=0;u=Math.ceil(e/(k+2*t)-.2);break;default:f=Math.ceil(d/(b+2*q)-.2),u=Math.ceil(e/(k+2*t)-.2)}f=Math.max(1,this.resize_initial_sizex+f);u=Math.max(1,this.resize_initial_sizey+
u);var x=Math.floor(this.container_width/this.min_widget_width-this.resize_initial_col+1),r=x*this.min_widget_width+(x-1)*q;f=Math.max(Math.min(f,h),w);f=Math.min(x,f);h=Math.min(h*b+(f-1)*q,r);b=w*b+(f-1)*q;u=Math.max(Math.min(u,g),m);g=g*k+(u-1)*t;k=m*k+(u-1)*t;this.resize_dir.right?u=this.resize_initial_sizey:this.resize_dir.bottom&&(f=this.resize_initial_sizex);n&&(t=this.resize_initial_col+f-1,n&&this.resize_initial_last_col<=t&&(this.set_dom_grid_width(Math.max(t+1,this.cols)),this.cols<t&&
this.add_faux_cols(t-this.cols)));n={};!this.resize_dir.bottom&&(n.width=Math.max(Math.min(this.resize_initial_width+d,h),b));!this.resize_dir.right&&(n.height=Math.max(Math.min(this.resize_initial_height+e,g),k));this.$resized_widget.css(n);if(f!==this.resize_last_sizex||u!==this.resize_last_sizey)this.resize_widget(this.$resized_widget,f,u,!1),this.set_dom_grid_width(this.cols),this.$resize_preview_holder.css({width:"",height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),"data-sizex":f,
"data-sizey":u});this.options.resize.resize&&this.options.resize.resize.call(this,a,c,this.$resized_widget);this.$el.trigger("gridster:resize");this.resize_last_sizex=f;this.resize_last_sizey=u};b.on_overlapped_column_change=function(a,c){if(!this.colliders_data.length)return this;var d=this.get_targeted_columns(this.colliders_data[0].el.data.col),f=this.last_cols.length,b=d.length,p;for(p=0;p<b;p++)-1===e.inArray(d[p],this.last_cols)&&(a||e.noop).call(this,d[p]);for(p=0;p<f;p++)-1===e.inArray(this.last_cols[p],
d)&&(c||e.noop).call(this,this.last_cols[p]);this.last_cols=d;return this};b.on_overlapped_row_change=function(a,c){if(!this.colliders_data.length)return this;var d=this.get_targeted_rows(this.colliders_data[0].el.data.row),f=this.last_rows.length,b=d.length,p;for(p=0;p<b;p++)-1===e.inArray(d[p],this.last_rows)&&(a||e.noop).call(this,d[p]);for(p=0;p<f;p++)-1===e.inArray(this.last_rows[p],d)&&(c||e.noop).call(this,this.last_rows[p]);this.last_rows=d};b.set_player=function(a,c,d){var f=!1;a=d?{col:a}:
this.colliders_data[0].el.data;var b=a.col,p=a.row||c;this.player_grid_data={col:b,row:p,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x};this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);var k=this.get_widgets_overlapped(this.player_grid_data),q=this.player_grid_data.size_y,t=this.player_grid_data.size_x,h=this.cells_occupied_by_placeholder,g=this;k.each(e.proxy(function(a,
c){var d=e(c),l=d.coords().grid,m=h.cols[0]+t-1,n=h.rows[0]+q-1;if(d.hasClass(g.options.static_class))return!0;if(g.options.collision.wait_for_mouseup&&g.drag_api.is_dragging)g.placeholder_grid_data.col=b,g.placeholder_grid_data.row=p,g.cells_occupied_by_placeholder=g.get_cells_occupied(g.placeholder_grid_data),g.$preview_holder.attr({"data-row":p,"data-col":b});else if(l.size_x<=t&&l.size_y<=q)if(g.is_swap_occupied(h.cols[0],l.row,l.size_x,l.size_y)||g.is_player_in(h.cols[0],l.row)||g.is_in_queue(h.cols[0],
l.row,d))if(g.is_swap_occupied(m,l.row,l.size_x,l.size_y)||g.is_player_in(m,l.row)||g.is_in_queue(m,l.row,d))if(g.is_swap_occupied(l.col,h.rows[0],l.size_x,l.size_y)||g.is_player_in(l.col,h.rows[0])||g.is_in_queue(l.col,h.rows[0],d))if(g.is_swap_occupied(l.col,n,l.size_x,l.size_y)||g.is_player_in(l.col,n)||g.is_in_queue(l.col,n,d))if(g.is_swap_occupied(h.cols[0],h.rows[0],l.size_x,l.size_y)||g.is_player_in(h.cols[0],h.rows[0])||g.is_in_queue(h.cols[0],h.rows[0],d))for(n=0;n<t;n++)for(var v=0;v<q;v++){var r=
h.cols[0]+n,w=h.rows[0]+v;if(!g.is_swap_occupied(r,w,l.size_x,l.size_y)&&!g.is_player_in(r,w)&&!g.is_in_queue(r,w,d)){f=g.queue_widget(r,w,d);n=t;break}}else g.options.move_widgets_down_only?k.each(e.proxy(function(a,c){var d=e(c);g.can_go_down(d)&&d.coords().grid.row===g.player_grid_data.row&&!g.is_in_queue(m,l.row,d)&&(g.move_widget_down(d,g.player_grid_data.size_y),g.set_placeholder(b,p))})):f=g.queue_widget(h.cols[0],h.rows[0],d);else f=g.queue_widget(l.col,n,d);else f=g.queue_widget(l.col,h.rows[0],
d);else f=g.queue_widget(m,l.row,d);else g.options.move_widgets_down_only?k.each(e.proxy(function(a,c){var d=e(c);g.can_go_down(d)&&d.coords().grid.row===g.player_grid_data.row&&!g.is_in_queue(d.coords().grid.col,l.row,d)&&(g.move_widget_down(d,g.player_grid_data.size_y),g.set_placeholder(b,p))})):f=g.queue_widget(h.cols[0],l.row,d);else g.options.shift_larger_widgets_down&&!f&&k.each(e.proxy(function(a,c){var d=e(c);g.can_go_down(d)&&d.coords().grid.row===g.player_grid_data.row&&(g.move_widget_down(d,
g.player_grid_data.size_y),g.set_placeholder(b,p))}));g.clean_up_changed()}));if(f&&this.can_placeholder_be_set(b,p,t,q)){for(var m in this.w_queue)c=parseInt(m.split("_")[0]),a=parseInt(m.split("_")[1]),"full"!==this.w_queue[m]&&this.new_move_widget_to(this.w_queue[m],c,a);this.set_placeholder(b,p)}k.length||(this.options.shift_widgets_up&&(m=this.can_go_player_up(this.player_grid_data),!1!==m&&(p=m)),this.can_placeholder_be_set(b,p,t,q)&&this.set_placeholder(b,p));this.w_queue={};return{col:b,row:p}};
b.is_swap_occupied=function(a,c,d,b){for(var e=!1,f=0;f<d;f++)for(var k=0;k<b;k++){var g=a+f,h=c+k,m=g+"_"+h;if(this.is_occupied(g,h))e=!0;else if(m in this.w_queue){if("full"===this.w_queue[m]){e=!0;continue}var n=this.w_queue[m].coords().grid;this.is_widget_under_player(n.col,n.row)||delete this.w_queue[m]}h>parseInt(this.options.max_rows)&&(e=!0);g>parseInt(this.options.max_cols)&&(e=!0);this.is_player_in(g,h)&&(e=!0)}return e};b.can_placeholder_be_set=function(a,c,d,e){for(var b=!0,f=0;f<d;f++)for(var k=
0;k<e;k++){var g=a+f,h=c+k,m=this.is_widget(g,h);h>parseInt(this.options.max_rows)&&(b=!1);g>parseInt(this.options.max_cols)&&(b=!1);this.is_occupied(g,h)&&!this.is_widget_queued_and_can_move(m)&&(b=!1)}return b};b.queue_widget=function(a,c,d){var e=d.coords().grid,b=a+"_"+c;if(b in this.w_queue)return!1;this.w_queue[b]=d;for(d=0;d<e.size_x;d++)for(var g=0;g<e.size_y;g++){var k=a+d+"_"+(c+g);k!==b&&(this.w_queue[k]="full")}return!0};b.is_widget_queued_and_can_move=function(a){var c=!1;if(!1===a)return!1;
for(var d in this.w_queue)if("full"!==this.w_queue[d]&&this.w_queue[d].attr("data-col")===a.attr("data-col")&&this.w_queue[d].attr("data-row")===a.attr("data-row")){c=!0;var b=this.w_queue[d],e=parseInt(d.split("_")[0]),g=parseInt(d.split("_")[1]);b=b.coords().grid;for(var k=0;k<b.size_x;k++)for(var h=0;h<b.size_y;h++)this.is_player_in(e+k,g+h)&&(c=!1)}return c};b.is_in_queue=function(a,c,d){var b=!1;a=a+"_"+c;a in this.w_queue&&("full"===this.w_queue[a]?b=!0:(b=this.w_queue[a].coords().grid,this.is_widget_under_player(b.col,
b.row)?this.w_queue[a].attr("data-col")===d.attr("data-col")&&this.w_queue[a].attr("data-row")===d.attr("data-row")?(delete this.w_queue[a],b=!1):b=!0:(delete this.w_queue[a],b=!1)));return b};b.widgets_constraints=function(a){var c=e([]),d=[],b=[];a.each(e.proxy(function(a,f){var k=e(f),l=k.coords().grid;this.can_go_widget_up(l)?(c=c.add(k),d.push(l)):b.push(l)},this));a.not(c);return{can_go_up:g.sort_by_row_asc(d),can_not_go_up:g.sort_by_row_desc(b)}};b.manage_movements=function(a,c,d){e.each(a,
e.proxy(function(a,b){var e=b.el,f=this.can_go_widget_up(b);f?(this.move_widget_to(e,f),this.set_placeholder(c,f+b.size_y)):this.can_go_player_up(this.player_grid_data)||(f=d+this.player_grid_data.size_y-b.row,this.can_go_down(e)&&(console.log("In Move Down!"),this.move_widget_down(e,f),this.set_placeholder(c,d)))},this));return this};b.is_player=function(a,c){if(c&&!this.gridmap[a])return!1;var d=c?this.gridmap[a][c]:a;return d&&(d.is(this.$player)||d.is(this.$helper))};b.is_player_in=function(a,
c){var d=this.cells_occupied_by_player||{};return 0<=e.inArray(a,d.cols)&&0<=e.inArray(c,d.rows)};b.is_placeholder_in=function(a,c){var d=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(a)&&0<=e.inArray(c,d.rows)};b.is_placeholder_in_col=function(a){return 0<=e.inArray(a,(this.cells_occupied_by_placeholder||[]).cols)};b.is_empty=function(a,c){return"undefined"!==typeof this.gridmap[a]?"undefined"!==typeof this.gridmap[a][c]&&!1===this.gridmap[a][c]?!0:!1:!0};b.is_valid_col=
function(a,c){return Infinity===this.options.max_cols?!0:this.cols>=this.calculate_highest_col(a,c)};b.is_valid_row=function(a,c){return this.rows>=this.calculate_highest_row(a,c)};b.calculate_highest_col=function(a,c){return a+(c||1)-1};b.calculate_highest_row=function(a,c){return a+(c||1)-1};b.is_occupied=function(a,c){return!this.gridmap[a]||this.is_player(a,c)?!1:this.gridmap[a][c]?this.options.ignore_self_occupied?this.$player.data()!==e(this.gridmap[a][c]).data():!0:!1};b.is_widget=function(a,
c){var d=this.gridmap[a];return d?(d=d[c])?d:!1:!1};b.is_static=function(a,c){var d=this.gridmap[a];return d?(d=d[c])&&d.hasClass(this.options.static_class)?!0:!1:!1};b.is_widget_under_player=function(a,c){return this.is_widget(a,c)?this.is_player_in(a,c):!1};b.get_widgets_under_player=function(a){a||(a=this.cells_occupied_by_player||{cols:[],rows:[]});var c=e([]);e.each(a.cols,e.proxy(function(d,b){e.each(a.rows,e.proxy(function(a,d){this.is_widget(b,d)&&(c=c.add(this.gridmap[b][d]))},this))},this));
return c};b.set_placeholder=function(a,c){var d=e.extend({},this.placeholder_grid_data),b=a+d.size_x-1;b>this.cols&&(a-=b-a);b=this.placeholder_grid_data.row<c;var l=this.placeholder_grid_data.col!==a;this.placeholder_grid_data.col=a;this.placeholder_grid_data.row=c;this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);this.$preview_holder.attr({"data-row":c,"data-col":a});this.options.shift_player_up&&((b||l)&&this.widgets_below({col:d.col,row:d.row,size_y:d.size_y,
size_x:d.size_x}).each(e.proxy(function(a,c){var d=e(c),b=d.coords().grid;(b=this.can_go_widget_up(b))&&this.move_widget_to(d,b)},this)),b=this.get_widgets_under_player(this.cells_occupied_by_placeholder),b.length&&b.each(e.proxy(function(a,b){var f=e(b);this.move_widget_down(f,c+d.size_y-f.data("coords").grid.row)},this)))};b.can_go_player_up=function(a){var c=a.row+a.size_y-1,d=!0,b=[],e=1E4,g=this.get_widgets_under_player();this.for_each_column_occupied(a,function(a){var f=this.gridmap[a],l=c+
1;for(b[a]=[];0<--l;)if(this.is_empty(a,l)||this.is_player(a,l)||this.is_widget(a,l)&&f[l].is(g))b[a].push(l),e=l<e?l:e;else break;if(0===b[a].length)return d=!1,!0;b[a].sort(function(a,c){return a-c})});return d?this.get_valid_rows(a,b,e):!1};b.can_go_widget_up=function(a){var c=a.row+a.size_y-1,d=!0,b=[],e=1E4;this.for_each_column_occupied(a,function(f){var l=this.gridmap[f];b[f]=[];for(var g=c+1;0<--g&&(!this.is_widget(f,g)||this.is_player_in(f,g)||l[g].is(a.el));)this.is_player(f,g)||this.is_placeholder_in(f,
g)||this.is_player_in(f,g)||b[f].push(g),g<e&&(e=g);if(0===b[f].length)return d=!1,!0;b[f].sort(function(a,c){return a-c})});return d?this.get_valid_rows(a,b,e):!1};b.get_valid_rows=function(a,c,d){var b=a.row,g=a.row+a.size_y-1;a=a.size_y;var h=d-1;for(d=[];++h<=g;){var k=!0;e.each(c,function(a,c){e.isArray(c)&&-1===e.inArray(h,c)&&(k=!1)});if(!0===k&&(d.push(h),d.length===a))break}c=!1;1===a?d[0]!==b&&(c=d[0]||!1):d[0]!==b&&(c=this.get_consecutive_numbers_index(d,a));return c};b.get_consecutive_numbers_index=
function(a,c){for(var d=a.length,b=[],e=!0,g=-1,k=0;k<d;k++){if(e||a[k]===g+1){b.push(k);if(b.length===c)break;e=!1}else b=[],e=!0;g=a[k]}return b.length>=c?a[b[0]]:!1};b.get_widgets_overlapped=function(){var a=e([]),c=[],d=this.cells_occupied_by_player.rows.slice(0);d.reverse();e.each(this.cells_occupied_by_player.cols,e.proxy(function(b,g){e.each(d,e.proxy(function(d,b){if(!this.gridmap[g])return!0;var f=this.gridmap[g][b];this.is_occupied(g,b)&&!this.is_player(f)&&-1===e.inArray(f,c)&&(a=a.add(f),
c.push(f))},this))},this));return a};b.on_start_overlapping_column=function(a){this.set_player(a,void 0,!1)};b.on_start_overlapping_row=function(a){this.set_player(void 0,a,!1)};b.on_stop_overlapping_column=function(a){var c=this;this.options.shift_larger_widgets_down&&this.for_each_widget_below(a,this.cells_occupied_by_player.rows[0],function(a,b){c.move_widget_up(this,c.player_grid_data.size_y)})};b.on_stop_overlapping_row=function(a){var c=this,d=this.cells_occupied_by_player.cols;if(this.options.shift_larger_widgets_down)for(var b=
0,e=d.length;b<e;b++)this.for_each_widget_below(d[b],a,function(a,d){c.move_widget_up(this,c.player_grid_data.size_y)})};b.new_move_widget_to=function(a,c,d){var b=a.coords().grid;this.remove_from_gridmap(b);b.row=d;b.col=c;this.add_to_gridmap(b);a.attr("data-row",d);a.attr("data-col",c);this.update_widget_position(b,a);this.$changed=this.$changed.add(a);return this};b.move_widget=function(a,c,d,b){var e=a.coords().grid;c={col:c,row:d,size_x:e.size_x,size_y:e.size_y};this.mutate_widget_in_gridmap(a,
e,c);this.set_dom_grid_height();this.set_dom_grid_width();b&&b.call(this,c.col,c.row);return a};b.move_widget_to=function(a,c){var d=this,b=a.coords().grid,g=this.widgets_below(a);if(!1===this.can_move_to(b,b.col,c))return!1;this.remove_from_gridmap(b);b.row=c;this.add_to_gridmap(b);a.attr("data-row",c);this.$changed=this.$changed.add(a);g.each(function(a,c){var b=e(c),f=b.coords().grid,g=d.can_go_widget_up(f);g&&g!==f.row&&d.move_widget_to(b,g)});return this};b.move_widget_up=function(a,c){if(void 0===
c)return!1;var d=a.coords().grid,b=d.row,g=[];c||(c=1);if(!this.can_go_up(a))return!1;this.for_each_column_occupied(d,function(d){if(-1===e.inArray(a,g)){var f=a.coords().grid,l=b-c;l=this.can_go_up_to_row(f,d,l);if(!l)return!0;this.remove_from_gridmap(f);f.row=l;this.add_to_gridmap(f);a.attr("data-row",f.row);this.$changed=this.$changed.add(a);g.push(a)}})};b.move_widget_down=function(a,c){if(0>=c)return!1;var d=a.coords().grid.row;if(d+(a.coords().grid.size_y-1)+c>this.options.max_rows)return!1;
var b=[];if(!a)return!1;this.failed=!1;if(-1===e.inArray(a,b)){var g=a.coords().grid;d+=c;this.widgets_below(a).each(e.proxy(function(a,d){if(!0!==this.failed){var b=e(d),f=b.coords().grid;f=this.displacement_diff(f,g,c);0<f&&(this.failed=!1===this.move_widget_down(b,f))}},this));if(this.failed)return!1;this.remove_from_gridmap(g);g.row=d;this.update_widget_position(g,a);a.attr("data-row",g.row);this.$changed=this.$changed.add(a);b.push(a)}return!0};b.can_go_up_to_row=function(a,c,d){var b=!0,g=[],
h=a.row;this.for_each_column_occupied(a,function(a){g[a]=[];for(k=h;k--;)if(this.is_empty(a,k)&&!this.is_placeholder_in(a,k))g[a].push(k);else break;if(!g[a].length)return b=!1,!0});if(!b)return!1;var k=d;for(k=1;k<h;k++){a=!0;c=0;for(d=g.length;c<d;c++)g[c]&&-1===e.inArray(k,g[c])&&(a=!1);if(!0===a){b=k;break}}return b};b.displacement_diff=function(a,c,d){var b=a.row,e=[],g=c.row+c.size_y;this.for_each_column_occupied(a,function(a){for(var c=0,d=g;d<b;d++)this.is_empty(a,d)&&(c+=1);e.push(c)});a=
Math.max.apply(Math,e);d-=a;return 0<d?d:0};b.widgets_below=function(a){var c=e([]);a=e.isPlainObject(a)?a:a.coords().grid;if(void 0===a)return c;var d=this,b=a.row+a.size_y-1;this.for_each_column_occupied(a,function(a){d.for_each_widget_below(a,b,function(a,b){if(!d.is_player(this)&&-1===e.inArray(this,c))return c=c.add(this),!0})});return g.sort_by_row_asc(c)};b.set_cells_player_occupies=function(a,c){this.remove_from_gridmap(this.placeholder_grid_data);this.placeholder_grid_data.col=a;this.placeholder_grid_data.row=
c;this.add_to_gridmap(this.placeholder_grid_data,this.$player);return this};b.empty_cells_player_occupies=function(){this.remove_from_gridmap(this.placeholder_grid_data);return this};b.can_go_down=function(a){var c=!0,d=this;a.hasClass(this.options.static_class)&&(c=!1);this.widgets_below(a).each(function(){e(this).hasClass(d.options.static_class)&&(c=!1)});return c};b.can_go_up=function(a){a=a.coords().grid;var c=a.row,d=c-1,b=!0;if(1===c)return!1;this.for_each_column_occupied(a,function(a){if(this.is_occupied(a,
d)||this.is_player(a,d)||this.is_placeholder_in(a,d)||this.is_player_in(a,d))return b=!1,!0});return b};b.can_move_to=function(a,c,d){var b=a.el,e=!0;if(Infinity!==this.options.max_cols&&c+a.size_x-1>this.cols||this.options.max_rows<d+a.size_y-1)return!1;this.for_each_cell_occupied({size_y:a.size_y,size_x:a.size_x,col:c,row:d},function(c,d){var f=this.is_widget(c,d);!f||a.el&&!f.is(b)||(e=!1)});return e};b.get_targeted_columns=function(a){for(var c=(a||this.player_grid_data.col)+(this.player_grid_data.size_x-
1),d=[];a<=c;a++)d.push(a);return d};b.get_targeted_rows=function(a){for(var c=(a||this.player_grid_data.row)+(this.player_grid_data.size_y-1),d=[];a<=c;a++)d.push(a);return d};b.get_cells_occupied=function(a,c){var d={cols:[],rows:[]},b;c instanceof e&&(a=c.coords().grid);for(b=0;b<a.size_x;b++)d.cols.push(a.col+b);for(b=0;b<a.size_y;b++)d.rows.push(a.row+b);return d};b.for_each_cell_occupied=function(a,c){this.for_each_column_occupied(a,function(d){this.for_each_row_occupied(a,function(a){c.call(this,
d,a)})});return this};b.for_each_column_occupied=function(a,c){for(var d=0;d<a.size_x;d++)c.call(this,a.col+d,a)};b.for_each_row_occupied=function(a,c){for(var d=0;d<a.size_y;d++)c.call(this,a.row+d,a)};b.clean_up_changed=function(){var a=this;a.$changed.each(function(){a.options.shift_larger_widgets_down&&a.move_widget_up(e(this))})};b._traversing_widgets=function(a,c,d,b,g){var f=this.gridmap;if(f[d]){var h,l;a=a+"/"+c;d instanceof e&&(c=d.coords().grid,d=c.col,g=b=c.row);var m=[],n=b;c={"for_each/above":function(){for(;n--&&
!(0<n&&this.is_widget(d,n)&&-1===e.inArray(f[d][n],m)&&(h=g.call(f[d][n],d,n),m.push(f[d][n]),h)););},"for_each/below":function(){n=b+1;for(l=f[d].length;n<l;n++)this.is_widget(d,n)&&-1===e.inArray(f[d][n],m)&&(h=g.call(f[d][n],d,n),m.push(f[d][n]))}};c[a]&&c[a].call(this)}};b.for_each_widget_above=function(a,c,d){this._traversing_widgets("for_each","above",a,c,d);return this};b.for_each_widget_below=function(a,c,d){this._traversing_widgets("for_each","below",a,c,d);return this};b.get_highest_occupied_cell=
function(){var a=this.gridmap;for(var c=a[1].length,d=[],b=[],e=a.length-1;1<=e;e--)for(a=c-1;1<=a;a--)if(this.is_widget(e,a)){d.push(a);b.push(e);break}return{col:Math.max.apply(Math,b),row:Math.max.apply(Math,d)}};b.get_widgets_in_range=function(a,c,d,b){var f=e([]),g,h;for(g=d;g>=a;g--)for(h=b;h>=c;h--){var m=this.is_widget(g,h);if(!1!==m){var n=m.data("coords").grid;n.col>=a&&n.col<=d&&n.row>=c&&n.row<=b&&(f=f.add(m))}}return f};b.get_widgets_at_cell=function(a,c){return this.get_widgets_in_range(a,
c,a,c)};b.get_widgets_from=function(a,c){var d=e();a&&(d=d.add(this.$widgets.filter(function(){var c=parseInt(e(this).attr("data-col"));return c===a||c>a})));c&&(d=d.add(this.$widgets.filter(function(){var a=parseInt(e(this).attr("data-row"));return a===c||a>c})));return d};b.set_dom_grid_height=function(a){"undefined"===typeof a&&(a=this.get_highest_occupied_cell().row,a=(a+1)*this.options.widget_margins[1]+a*this.min_widget_height);this.container_height=a;this.$el.css("height",this.container_height);
return this};b.set_dom_grid_width=function(a){"undefined"===typeof a&&(a=this.get_highest_occupied_cell().col);a=Math.min(Infinity===this.options.max_cols?this.options.max_cols:this.cols,Math.max(a,this.options.min_cols));this.container_width=(a+1)*this.options.widget_margins[0]+a*this.min_widget_width;if(this.is_responsive())return this.$el.css({"min-width":"100%","max-width":"100%"}),this;this.$el.css("width",this.container_width);return this};b.is_responsive=function(){return this.options.autogenerate_stylesheet&&
"auto"===this.options.widget_base_dimensions[0]&&Infinity!==this.options.max_cols};b.get_responsive_col_width=function(){var a=this.cols||this.options.max_cols;return(this.$el[0].clientWidth-3-(a+1)*this.options.widget_margins[0])/a};b.resize_responsive_layout=function(){this.min_widget_width=this.get_responsive_col_width();this.generate_stylesheet();this.update_widgets_dimensions();this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0]);return this};
b.toggle_collapsed_grid=function(a,c){a?(this.$widgets.css({"margin-top":c.widget_margins[0],"margin-bottom":c.widget_margins[0],"min-height":c.widget_base_dimensions[1]}),this.$el.addClass("collapsed"),this.resize_api&&this.disable_resize(),this.drag_api&&this.disable()):(this.$widgets.css({"margin-top":"auto","margin-bottom":"auto","min-height":"auto"}),this.$el.removeClass("collapsed"),this.resize_api&&this.enable_resize(),this.drag_api&&this.enable());return this};b.generate_stylesheet=function(a){var c=
"",d=this.is_responsive()&&this.options.responsive_breakpoint&&e(window).width()<this.options.responsive_breakpoint;a||(a={});a.cols||(a.cols=this.cols);a.rows||(a.rows=this.rows);a.namespace||(a.namespace=this.options.namespace);a.widget_base_dimensions||(a.widget_base_dimensions=this.options.widget_base_dimensions);a.widget_margins||(a.widget_margins=this.options.widget_margins);this.is_responsive()&&(a.widget_base_dimensions=[this.get_responsive_col_width(),a.widget_base_dimensions[1]],this.toggle_collapsed_grid(d,
a));var b=e.param(a);if(0<=e.inArray(b,g.generated_stylesheets))return!1;this.generated_stylesheets.push(b);g.generated_stylesheets.push(b);for(b=1;b<=a.cols+1;b++)c+=a.namespace+' [data-col="'+b+'"] { left:'+(d?this.options.widget_margins[0]:b*a.widget_margins[0]+(b-1)*a.widget_base_dimensions[0])+"px; }\n";for(b=1;b<=a.rows+1;b++)c+=a.namespace+' [data-row="'+b+'"] { top:'+(b*a.widget_margins[1]+(b-1)*a.widget_base_dimensions[1])+"px; }\n";for(b=1;b<=a.rows;b++)c+=a.namespace+' [data-sizey="'+b+
'"] { height:'+(d?"auto":b*a.widget_base_dimensions[1]+(b-1)*a.widget_margins[1])+(d?"":"px")+"; }\n";for(b=1;b<=a.cols;b++){var h=b*a.widget_base_dimensions[0]+(b-1)*a.widget_margins[0];c+=a.namespace+' [data-sizex="'+b+'"] { width:'+(d?this.$wrapper.width()-2*this.options.widget_margins[0]:h>this.$wrapper.width()?this.$wrapper.width():h)+"px; }\n"}this.remove_style_tags();return this.add_style_tag(c)};b.add_style_tag=function(a){var c=document,d="gridster-stylesheet";""!==this.options.namespace&&
(d=d+"-"+this.options.namespace);if(!document.getElementById(d)){var b=c.createElement("style");b.id=d;c.getElementsByTagName("head")[0].appendChild(b);b.setAttribute("type","text/css");b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));this.remove_style_tags();this.$style_tags=this.$style_tags.add(b)}return this};b.remove_style_tags=function(){var a=g.generated_stylesheets,c=this.generated_stylesheets;this.$style_tags.remove();g.generated_stylesheets=e.map(a,function(a){if(-1===
e.inArray(a,c))return a})};b.generate_faux_grid=function(a,c){this.faux_grid=[];this.gridmap=[];var b,e;for(b=c;0<b;b--)for(this.gridmap[b]=[],e=a;0<e;e--)this.add_faux_cell(e,b);return this};b.add_faux_cell=function(a,c){var b=e({left:this.baseX+(c-1)*this.min_widget_width,top:this.baseY+(a-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:c,row:a,original_col:c,original_row:a}).coords();e.isArray(this.gridmap[c])||(this.gridmap[c]=[]);"undefined"===typeof this.gridmap[c][a]&&
(this.gridmap[c][a]=!1);this.faux_grid.push(b);return this};b.add_faux_rows=function(a){a=window.parseInt(a,10);for(var c=this.rows,b=a=c+parseInt(a||1);b>c;b--)for(var e=this.cols;1<=e;e--)this.add_faux_cell(b,e);this.rows=a;this.options.autogenerate_stylesheet&&this.generate_stylesheet();return this};b.add_faux_cols=function(a){a=window.parseInt(a,10);var b=this.cols;a=b+parseInt(a||1);a=Math.min(a,this.options.max_cols);for(b+=1;b<=a;b++)for(var d=this.rows;1<=d;d--)this.add_faux_cell(d,b);this.cols=
a;this.options.autogenerate_stylesheet&&this.generate_stylesheet();return this};b.recalculate_faux_grid=function(){var a=this.$wrapper.width();this.baseX=(n.width()-a)/2;this.baseY=this.$wrapper.offset().top;"relative"===this.$wrapper.css("position")&&(this.baseX=this.baseY=0);e.each(this.faux_grid,e.proxy(function(a,b){this.faux_grid[a]=b.update({left:this.baseX+(b.data.col-1)*this.min_widget_width,top:this.baseY+(b.data.row-1)*this.min_widget_height})},this));this.is_responsive()&&this.resize_responsive_layout();
this.options.center_widgets&&this.center_widgets();return this};b.resize_widget_dimensions=function(a){a.widget_margins&&(this.options.widget_margins=a.widget_margins);a.widget_base_dimensions&&(this.options.widget_base_dimensions=a.widget_base_dimensions);this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0];this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1];this.$widgets.each(e.proxy(function(a,b){var c=e(b);this.resize_widget(c)},
this));this.generate_grid_and_stylesheet();this.get_widgets_from_DOM();this.set_dom_grid_height();this.set_dom_grid_width();return this};b.get_widgets_from_DOM=function(){var a=this.$widgets.map(e.proxy(function(a,b){var c=e(b);return this.dom_to_coords(c)},this));a=g.sort_by_row_and_col_asc(a);e(a).map(e.proxy(function(a,b){return this.register_widget(b)||null},this)).length&&this.$el.trigger("gridster:positionschanged");return this};b.get_num_widgets=function(){return this.$widgets.size()};b.set_num_columns=
function(a){var b=this.options.max_cols;a=Math.floor(a/(this.min_widget_width+this.options.widget_margins[0]))+this.options.extra_cols;var d=this.$widgets.map(function(){return e(this).attr("data-col")}).get();d.length||(d=[0]);d=Math.max.apply(Math,d);this.cols=Math.max(d,a,this.options.min_cols);Infinity!==b&&b>=d&&b<this.cols&&(this.cols=b);this.drag_api&&this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])};b.set_new_num_rows=function(a){var b=
this.options.max_rows,d=this.$widgets.map(function(){return e(this).attr("data-row")}).get();d.length||(d=[0]);d=Math.max.apply(Math,d);this.rows=Math.max(d,a,this.options.min_rows);Infinity!==b&&(b<d||b<this.rows)&&(b=this.rows);this.min_rows=d;this.max_rows=b;this.options.max_rows=b;a=this.rows*this.min_widget_height+(this.rows+1)*this.options.widget_margins[1];this.drag_api&&(this.drag_api.options.container_height=a);this.container_height=a;this.generate_faux_grid(this.rows,this.cols)};b.generate_grid_and_stylesheet=
function(){var a=this.$wrapper.width();this.set_num_columns(a);var b=this.options.extra_rows;this.$widgets.each(function(a,c){b+=+e(c).attr("data-sizey")});this.rows=this.options.max_rows;this.baseX=(n.width()-a)/2;this.baseY=this.$wrapper.offset().top;this.options.autogenerate_stylesheet&&this.generate_stylesheet();return this.generate_faux_grid(this.rows,this.cols)};b.destroy=function(a){this.$el.removeData("gridster");e.each(this.$widgets,function(){e(this).removeData("coords")});n.unbind(".gridster");
this.drag_api&&this.drag_api.destroy();this.resize_api&&this.resize_api.destroy();this.$widgets.each(function(a,b){e(b).coords().destroy()});this.resize_api&&this.resize_api.destroy();this.remove_style_tags();a&&this.$el.remove();return this};e.fn.gridster=function(a){return this.each(function(){var b=e(this);b.data("gridster")||b.data("gridster",new g(this,a))})};return g});
(function(e,b){"object"===typeof exports?module.exports=b(require("jquery"),require("./jquery.gridster.js")):"function"===typeof define&&define.amd?define(["jquery","gridster"],b):e.Gridster=b(e.$||e.jQuery,e.Gridster)})(this,function(e,b){var r=b.prototype;r.widgets_in_col=function(b){if(!this.gridmap[b])return!1;for(var e=this.gridmap[b].length-1;0<=e;e--)if(!1!==this.is_widget(b,e))return!0;return!1};r.widgets_in_row=function(b){for(var e=this.gridmap.length;1<=e;e--)if(!1!==this.is_widget(e,b))return!0;
return!1};r.get_bottom_most_occupied_cell=function(){var b=0,e=0;this.for_each_cell(function(g,h,a){g&&a>b&&(b=a,e=h)});return{col:e,row:b}};r.get_right_most_occupied_cell=function(){var b=0,e=0;this.for_each_cell(function(g,h,a){if(g)return b=a,e=h,!1});return{col:e,row:b}};r.for_each_cell=function(b,e){e||(e=this.gridmap);var g=e[1].length,h=e.length-1;a:for(;1<=h;h--)for(var a=g-1;1<=a;a--){var c=e[h]&&e[h][a];if(b&&!1===b.call(this,c,h,a))break a}};r.next_position_in_range=function(e,m){e||(e=
1);m||(m=1);for(var g=this.gridmap,h=g.length,a=[],c,d=1;d<h;d++){c=this.options.max_rows||g[d].length;for(var f=1;f<=c;f++)this.can_move_to({size_x:e,size_y:m},d,f)&&a.push({col:d,row:f,size_y:m,size_x:e})}return 1<=a.length?b.sort_by_col_asc(a)[0]:!1};r.closest_to_right=function(b,e){if(!this.gridmap[b])return!1;for(var g=this.gridmap.length-1,h=b;h<=g;h++)if(this.gridmap[h][e])return{col:h,row:e};return!1};r.closest_to_left=function(b,e){if(!this.gridmap[b])return!1;for(var g=b;1<=g;g--)if(this.gridmap[g][e])return{col:g,
row:e};return!1};return b});